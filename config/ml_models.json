{
  "version": "1.0",
  "description": "Machine Learning model configurations for RCBot2",
  "last_updated": "2025-11-22",

  "models": {
    "behavior_clone_tf2_general": {
      "enabled": true,
      "path": "models/behavior_clone_tf2.onnx",
      "type": "behavior_cloning",
      "input_size": 96,
      "output_size": 10,
      "game": "tf2",
      "class": "all",
      "description": "General behavior cloning from human TF2 demos (all classes)",
      "training_data": {
        "hours_recorded": 10,
        "num_demos": 25,
        "skill_level": "intermediate"
      },
      "performance": {
        "accuracy": 0.85,
        "avg_inference_ms": 0.3,
        "memory_mb": 5
      }
    },

    "behavior_clone_tf2_soldier": {
      "enabled": false,
      "path": "models/behavior_clone_tf2_soldier.onnx",
      "type": "behavior_cloning",
      "input_size": 96,
      "output_size": 10,
      "game": "tf2",
      "class": "soldier",
      "description": "Soldier-specific behavior cloning model",
      "training_data": {
        "hours_recorded": 15,
        "num_demos": 40,
        "skill_level": "expert"
      }
    },

    "dqn_tf2_combat": {
      "enabled": false,
      "path": "models/dqn_tf2_combat.onnx",
      "type": "reinforcement_learning",
      "algorithm": "DQN",
      "input_size": 96,
      "output_size": 20,
      "game": "tf2",
      "class": "all",
      "description": "DQN trained for TF2 combat scenarios",
      "training_info": {
        "episodes": 50000,
        "epsilon_start": 1.0,
        "epsilon_end": 0.1,
        "learning_rate": 0.0001,
        "discount_factor": 0.99
      }
    },

    "ppo_tf2_payload": {
      "enabled": false,
      "path": "models/ppo_tf2_payload.onnx",
      "type": "reinforcement_learning",
      "algorithm": "PPO",
      "input_size": 96,
      "output_size": 15,
      "game": "tf2",
      "game_mode": "payload",
      "description": "PPO trained for TF2 Payload game mode",
      "training_info": {
        "episodes": 100000,
        "clip_epsilon": 0.2,
        "learning_rate": 0.0003,
        "gae_lambda": 0.95
      }
    },

    "test_dummy": {
      "enabled": false,
      "path": "models/test_model.onnx",
      "type": "testing",
      "input_size": 128,
      "output_size": 10,
      "description": "Dummy model for testing ONNX integration"
    }
  },

  "model_selection": {
    "mode": "auto",
    "description": "Model selection mode: auto, manual, or hybrid",
    "auto_selection_criteria": {
      "prefer_class_specific": true,
      "prefer_game_mode_specific": true,
      "fallback_to_general": true
    },
    "manual_model": "behavior_clone_tf2_general",
    "hybrid": {
      "use_ml_for_movement": true,
      "use_ml_for_aiming": true,
      "use_rules_for_strategy": true
    }
  },

  "output_mapping": {
    "description": "How to map model outputs to bot actions",
    "movement": {
      "forward_backward": {
        "output_index": 0,
        "type": "continuous",
        "range": [-1.0, 1.0],
        "scale": 450.0,
        "description": "Forward speed in units/sec"
      },
      "left_right": {
        "output_index": 1,
        "type": "continuous",
        "range": [-1.0, 1.0],
        "scale": 450.0,
        "description": "Strafe speed in units/sec"
      },
      "up_down": {
        "output_index": 2,
        "type": "continuous",
        "range": [-1.0, 1.0],
        "scale": 200.0,
        "description": "Vertical movement (swimming/flying)"
      }
    },
    "aiming": {
      "yaw_delta": {
        "output_index": 3,
        "type": "continuous",
        "range": [-1.0, 1.0],
        "scale": 30.0,
        "description": "Horizontal aim adjustment (degrees per frame)"
      },
      "pitch_delta": {
        "output_index": 4,
        "type": "continuous",
        "range": [-1.0, 1.0],
        "scale": 30.0,
        "description": "Vertical aim adjustment (degrees per frame)"
      }
    },
    "buttons": {
      "attack": {
        "output_index": 5,
        "type": "binary",
        "threshold": 0.5,
        "button_flag": "IN_ATTACK"
      },
      "jump": {
        "output_index": 6,
        "type": "binary",
        "threshold": 0.5,
        "button_flag": "IN_JUMP"
      },
      "crouch": {
        "output_index": 7,
        "type": "binary",
        "threshold": 0.5,
        "button_flag": "IN_DUCK"
      },
      "reload": {
        "output_index": 8,
        "type": "binary",
        "threshold": 0.5,
        "button_flag": "IN_RELOAD"
      },
      "secondary_attack": {
        "output_index": 9,
        "type": "binary",
        "threshold": 0.5,
        "button_flag": "IN_ATTACK2"
      }
    }
  },

  "performance_settings": {
    "max_inference_time_ms": 1.0,
    "fallback_to_rules_on_timeout": true,
    "batch_inference": false,
    "batch_size": 1,
    "async_inference": false,
    "num_threads": 1,
    "optimization_level": "all",
    "quantization": {
      "enabled": false,
      "precision": "fp32",
      "options": ["fp32", "fp16", "int8"]
    }
  },

  "monitoring": {
    "log_inference_times": true,
    "log_predictions": false,
    "log_interval_seconds": 60.0,
    "performance_alerts": {
      "warn_if_inference_ms_exceeds": 0.5,
      "error_if_inference_ms_exceeds": 2.0,
      "warn_if_memory_mb_exceeds": 50,
      "error_if_memory_mb_exceeds": 100
    }
  },

  "debugging": {
    "dump_features_on_error": true,
    "dump_outputs_on_error": true,
    "validate_inputs": true,
    "validate_outputs": true,
    "clamp_outputs": true
  }
}
